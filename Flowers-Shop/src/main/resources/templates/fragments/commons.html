<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="#{title_message}">ОРХИДЕЯ</title>
  <link rel="icon" href="/images/orchid_9704101.png" type="image/icon type">
  <link rel="stylesheet" href="/css/reset-css.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header >
  <nav>
    <ul>
      <li class="glowing-gold">
        <img src="/images/orchid_9704101.png" alt="orchid">
        <a sec:authorize="isAuthenticated()" th:href="@{/home}" th:text="#{nav_bar_company}">Orchid</a>
        <a sec:authorize="!isAuthenticated()" th:href="@{/}" th:text="#{nav_bar_company}">Orchid</a>
      </li>
      <li sec:authorize="hasRole('ROLE_ADMIN')">
        <a class="glowing-gold" th:href="@{/bouquet/add}" th:text="#{nav_bar_add_bouquet}">Add Bouquet</a>
      </li>
      <li sec:authorize="!hasRole('ROLE_MODERATOR')">
        <a class="glowing-gold" th:href="@{/home}" th:text="#{nav_bar_gallery}">Gallery</a>
      </li>

      <li sec:authorize="hasRole('ROLE_MODERATOR')">
        <a class="glowing-gold" th:href="@{/order/change-status}">Change status</a>
      </li>

      <li sec:authorize="isAuthenticated() && !hasAnyRole('ROLE_ADMIN', 'ROLE_MODERATOR')">
        <span class="text-white" th:text="#{nav_bar_welcome}">Welcome, </span>
        <span class="text-white" sec:authentication="name">Anonymous</span>
      </li>
      <li sec:authorize="!isAuthenticated()">
        <a class="glowing-gold" th:href="@{/login}" th:text="#{nav_bar_login}">Login</a>
      </li>
      <li sec:authorize="!isAuthenticated()" >
        <a class="glowing-gold" th:href="@{/register}" th:text="#{nav_bar_register}">Register</a>
      </li>
      <li sec:authorize="!hasAnyRole('ROLE_ADMIN', 'ROLE_MODERATOR')">
        <a class="glowing-gold" th:href="@{/orders}" th:text="#{nav_bar_my_orders}">My orders</a>
      </li>
      <li sec:authorize="hasRole('ROLE_MODERATOR')">
        <a class="glowing-gold" th:href="@{/orders/pending}">All pending orders</a>
      </li>
      <li sec:authorize="isAuthenticated()">
        <form th:action="@{/logout}" th:method="post">
          <button type="submit" class="text-white bg-black glowing-gold" th:text="#{nav_bar_logout}">Logout</button>
        </form>
      </li>
      <li class="glowing-gold">
        <form >
          <label class="text-white px-2" for="lang" th:text="#{nav_bar_language}">Language</label>
          <select class="text-white bg-black" id="lang" name="lang" onchange="this.form.submit()">
            <option value="en_EN" th:selected="${#locale.toString()} == 'en_US'">En</option>
            <option value="bg_BG" th:selected="${#locale.toString()} == 'bg_BG'">Бг</option>
          </select>
        </form>
      </li>
      <li sec:authorize="!hasAnyRole('ROLE_ADMIN', 'ROLE_MODERATOR')">
        <a class="glowing-gold" th:href="@{/cart}">
<!--          TODO: show the number of products in the cart-->
          <img src="/images/shopping-cart.png" alt="cart">
        </a>
      </li>
    </ul>
  </nav>
</header>
<footer>
  <!-- todo: fix responsive issue with position-fixed -->
  <div th:text="|&copy #{footer_message}|">Ivan Rusenov 2024</div>
</footer>

</body>
</html>